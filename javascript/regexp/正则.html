<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<script>
    /**
     * 使用正则 get参数转换成 obj
     * @param url
     * @returns {{}}
     */
    function getSearch (url) {
        var reg_url = /^[^\?]+\?([\w\W]+)$/,
        reg_params = /([^&=]+)=([\w\W]*?)(&|$|#)/g,
        arr_url = reg_url.exec(url),
        ret = {};
        if (arr_url && arr_url[1]) {
            var str_params = arr_url[1], result;
            console.log(str_params, '=========================');
            while ((result = reg_params.exec(str_params)) != null) {
                console.log(result, '--------------');
                ret[result[1]] = result[2]; //匹配到的元素放在数组里，index放找到的首字母位置
            }
        }
        return ret;
    }

    var str = 'http://www.baidu.com?name=传奇&age=18';
    console.log(getSearch(str));





    var url = /(\w+):\/\/([\w.]+)\/(\S*)/;
    var text = "Visit my blog at http://www.example.com/~david";
    var result = text.match(url);
    if (result != null) {
        var fullurl = result[0]; // Contains "http://www.example.com/~david"
        var protocol = result[1]; // Contains "http"
        var host = result[2]; // Contains "www.example.com"
        var path = result[3]; // Contains "~david"
    }


    console.log(result);


    var pattern = /Java/g;
    var text = "JavaScript is more fun than Java!";
    var result;

    result = pattern.exec(text);//内部有个指针 执行一次再向下找一次
    console.log(result);

    result = pattern.exec(text);//内部有个指针 执行一次再向下找一次
    console.log(result);

    //    while((result = pattern.exec(text)) != null) {
//        alert("Matched '" + result[0] + "'" +
//                " at position " + result.index +
//                "; next search begins at " + pattern.lastIndex);
//    }

    //注意这里 ？ 的用法取消贪婪模式
    //以及replace 中  回调函数的用法  这个也是回调函数的典型用法
    var s = 'zzzzzzz[a]123[/a],zzz[a]123[/a]'.replace(/\[(.+?)\]/g, function(s, tag) {
        return '<' + tag + '>';
    });
    console.log(s);

    //输出重复次数最多的子串
    var str = 'abcaabcaaaaqwe';
    function search(str) {
        return str.match(/(\w)\1+/g).sort((x, y) => y.length - x.length)[0];
    }
    console.log(str.match(/(\w)\1+/g));
    console.log(search(str));

    var str = 'http://item.taobao.com/item.htm?a=1&b=2&c=&d=xxx&e';
    // /([^&=]+)=([\w\W]*?)(&|$|#)/g,
    var matchs = str.match(/[?&](\w+?)=(\w+?)[&]?/g);
    console.log(matchs);

    console.log('=========================');
    var matchs;
    var str = 'http://item.taobao.com/item.htm?a=1&b=2&c=1&d=xxx&e';
    var reg = /[?&](\w+?)=(\w+?)[^&=]/g;
    var tmpObj = {};
    while( (matchs = reg.exec(str)) != null ) {//赋值运算符的优先级是最低的
        tmpObj[matchs[1]] = matchs[2];
        console.log(matchs);
    }
    console.log(tmpObj);
</script>
</body>
</html>