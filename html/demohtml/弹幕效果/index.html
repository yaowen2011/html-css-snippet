<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            background-color: #eee;
        }

        .box {
            position: fixed;
            left: 0;
            bottom: 0;
            height: 80px;
            width: 100%;
            background-color: #666;
        }

        .boxBottom {
            width: 500px;
            margin: 0 auto;
            line-height: 80px;
            font-size: 30px;
        }

        .boxBottom input {
            height: 30px;
        }

        /*弹幕内容框*/
        span {
            position: absolute;
            padding: 5px 20px;
            font-size: 18px;
            display: none;
        }
    </style>
</head>
<body>
<!--<span></span>-->
<div class="box">
    <div class="boxBottom">
        <span>弹幕：</span>
        <input type="text" id="txt">
        <input type="button" value="发送" id="btn">
    </div>
</div>
<!--引入动画-->
<script src="js/animate.js"></script>
<script>
    //控制弹幕效果
    ;(function () {
        //点击按钮，获取内容，清空inputvalue
        //回车键可以 发送
        //常见span
        //设置span left
        //设置动画
        //删除span
        var btn = document.getElementById("btn");
        var txt = document.getElementById("txt");

        var fontColorCfg = ["red", "black", "#fff", "green"];
        //点击发送
        btn.addEventListener("click", function () {
            playWord();
        })
        //按下回车
        document.addEventListener("keyup", function (e) {
            if (e.keyCode == 13) {
                playWord();
            }
        })

        //播放弹幕
        function playWord() {
            var content = txt.value;
            txt.value = "";
            //创建span
            var span = document.createElement("span");
            span.innerText = content;
            document.body.appendChild(span);
            //设置left 屏幕的可视区域
            span.style.left = window.innerWidth + "px";

            //设置top
            span.style.top = Math.ceil(Math.random() * window.innerHeight/2) + "px";

            //随见字体颜色
            var random = parseInt(Math.random() * fontColorCfg.length);
            span.style.color = fontColorCfg[random];

            //设置可见
            span.style.display = "block";
            //动画
            var targetX = -(span.offsetLeft + window.innerWidth);

            animate(span, targetX, 2);
        }
    })();

</script>
</body>
</html>